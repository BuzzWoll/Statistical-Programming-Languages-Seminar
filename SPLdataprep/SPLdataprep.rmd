---
title: "SPL data preparation"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r}
library(httr)
library(jsonlite)

getJsonData = function(x){
  connection = "https://api.stlouisfed.org/fred/series/observations?"
  api_key = "&api_key=4c5743e8fb183ff3f7f47ba1ae651683&"
  file_type = "file_type=json&"
  observation_start="observation_start=1950-01-01&"
  observation_end="observation_end=2017-10-01"
  series_id=paste("series_id=",x,sep="")
  
  fromJSON(paste(connection,series_id,api_key,file_type,observation_start,observation_end, sep = ""))
}

json = getJsonData("INDPRO")

json$observations[c("date","value")]

sandp = read.csv("sandp500.csv")
sandp = sandp[-length(sandp$Date),]


length = length(sandp$Adj.Close)
sandp["returns"] = c(0,(sandp$Adj.Close[2:length]-sandp$Adj.Close[1:length-1])/sandp$Adj.Close[1:length-1])

sandp




```

